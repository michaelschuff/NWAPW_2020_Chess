<!doctype html>
<html>
    <head>
        <title>Chess</title>
        <link rel="stylesheet" type="text/css" href="home.css" />
        <script src='/socket.io/socket.io.js'></script>
        <script src='socketFunctions.js'></script>
    </head>
    
    <body>
        <div id=accountoptions>
            <p id=currentuser></p>
            <button id=logout onclick=logoutPressed()>Logout</button>
        </div>
        
        
        <script>
            
            var socket = io();


            socket.on('connect', function() {connectionSuccessful();});
            socket.on('reconnect', function() {reconnectionSuccessful();});
            socket.on('connect_error', function() {connectionFailed();});
            socket.on('connect_timeout', function() {connectionTimeout();});
            socket.on('reconnect_attempt', function() {attemptingReconnection();});
            socket.on('reconnect_error', function() {reconnectionFailed();});
            document.getElementById('currentuser').innerText = 'Logged in as ' + document.cookie.split('; ').find(row => row.startsWith('username=')).split('=')[1];

            socket.on('redirect', function(path) {redirect(path);});

            function logoutPressed() {
                socket.emit('logout', (document.cookie.split('; ').find(row => row.startsWith('sessionID'))).split('=')[1]);
                document.cookie = 'sessionID=; expires=Thu, 01 Jan 1970 00:00:00 GMT';
                document.cookie = 'username=; expires=Thu, 01 Jan 1970 00:00:00 GMT';
            }
            
        </script>
    </body>
</html>